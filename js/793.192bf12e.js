"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[793,508],{3508:function(t,s,e){e.r(s),e.d(s,{default:function(){return d}});var a=function(){var t=this,s=t._self._c;return s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{staticClass:"text-left"},[t._v(t._s(t.$t("tables.match_id")))]),s("th",{staticClass:"text-left"},[t._v(t._s(t.$t("tables.god")))]),s("th",[t._v(t._s(t.$t("tables.result")))]),s("th",[t._v(t._s(t.$t("tables.rounds")))]),s("th",[t._v(t._s(t.$t("tables.ranked")))])])]),s("tbody",[t.loading?t._l(t.placeholderRows,(function(t){return s("tr",{key:t,staticClass:"animate-pulse"},[s("td")])})):t._l(t.games,(function(e){return s("tr",{key:e.game_id},[s("td",{staticClass:"text-left"},[s("router-link",{staticClass:"ml-3",attrs:{to:"/games/"+e.game_id}},[t._v(t._s(e.game_id))])],1),s("td",{staticClass:"text-left"},[s("GodImage",{staticClass:"mr-2 ml-2",attrs:{god:e.god,height:60}}),t._v(" "+t._s(t.$t(`gods.${e.god}`))+" ")],1),s("td",[t._v(" "+t._s(t.getRankString(e.place))+" "),void 0!=e.ladder_mmr_change?[e.ladder_mmr_change>=0?s("span",{staticClass:"win"},[t._v(" +"+t._s(e.ladder_mmr_change)+" ")]):s("span",{staticClass:"loss"},[t._v(" "+t._s(e.ladder_mmr_change)+" ")])]:t._e(),s("div",{staticClass:"text-muted"},[t._v(t._s(t.dateFromNow(e.created_at)))])],2),s("td",[t._v(" "+t._s(e.rounds||"?")+" "+t._s(t.$t("tables.rounds"))+" "),s("div",[s("span",{staticClass:"win"},[t._v(t._s(e.wins))]),t._v("-"),s("span",{staticClass:"loss"},[t._v(t._s(e.losses))])])]),s("td",[t._v(t._s(e.ranked?"Ranked":"Unranked"))])])}))],2)])},i=[],r=e(2371),o=e(7183),l={components:{GodImage:r.Z},props:{games:Array,loading:Boolean,placeholderRows:{type:Number,default:3}},methods:{hhmmss:o.Iw,dateFromNow:o.wS,getRankString:o.rH}},n=l,c=e(1001),u=(0,c.Z)(n,a,i,!1,null,"033ec655",null),d=u.exports},2793:function(t,s,e){e.r(s),e.d(s,{default:function(){return I}});var a=function(){var t=this,s=t._self._c;return s("div",[s("h1",{staticClass:"page-title"},[t._v("Profile")]),t.isAdmin?s("WelcomeQuests",{staticClass:"mb-5"}):t._e(),t.isAdmin?s("LoginQuests",{staticClass:"mb-5"}):t._e(),s("DailyQuests",{staticClass:"mb-5"}),s("div",{staticClass:"d-flex justify-content-between align-items-center"},[t.games.length>0?s("h2",[t._v(t._s(t.$t("profile.recent_games")))]):t._e(),s("router-link",{staticClass:"color-primary",attrs:{to:"/profile/games"}},[s("i",{staticClass:"fas fa-plus mr-1"}),t._v(t._s(t.$t("profile.view_all")))])],1),s("PlayerGamesList",{attrs:{games:t.games,loading:t.gamesLoading,placeholderRows:3}})],1)},i=[],r=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"quest container p-0"},[s("b-alert",{attrs:{show:"",variant:"danger",dismissible:""},model:{value:t.showError,callback:function(s){t.showError=s},expression:"showError"}},[t._v(" "+t._s(t.error)+" ")]),s("div",{staticClass:"row"},[t.loading?[t._m(0),t._m(1)]:t._e(),t._l(t.quests,(function(a){return s("div",{key:a.quest_id,staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4"},[s("div",{staticClass:"single-quest"},[s("p",[t._v(t._s(a.quest_name))]),s("ProgressBar",{attrs:{progress:a.capped_quest_progress,required:a.required_amount}})],1),s("div",{staticClass:"d-flex flex-row quest-xp"},[a.claimed?s("div",{staticClass:"quest-rewards"},[t._v(t._s(t.$t("common.completed")))]):s("div",{staticClass:"quest-rewards"},[a.coin_reward>0?s("span",{staticClass:"pog-text mr-1"},[s("img",{staticClass:"coin",attrs:{src:"/images/coin1.png",alt:"Gold"}}),t._v(" "+t._s(a.coin_reward)+" ")]):t._e(),a.xp_reward>0?s("span",{staticClass:"quest-xp-text"},[t._v(t._s(a.xp_reward)+" "+t._s(t.$t("common.xp")))]):t._e()]),a.quest_completed&&!a.claimed?s("button",{staticClass:"btn btn-primary ml-auto mr-3 my-2",attrs:{type:"button"},on:{click:function(s){return t.claimQuest(a)}}},[t._v(" "+t._s(t.$t("common.claim"))+" ")]):t._e(),a.can_reroll?s("a",{staticClass:"ml-auto mr-3 reroll-button",on:{click:function(s){return t.rerollQuest(a)}}},[s("img",{attrs:{src:e(3913),alt:"Reroll"}})]):a.quest_completed?a.claimed?[s("span",{staticClass:"ml-auto mr-2 next-quest-text"},[t._v(t._s(t.getTimeUntilNextQuest(a.created)))])]:t._e():[s("span",{staticClass:"ml-auto mr-2 next-quest-text"},[t._v(t._s(t.getTimeUntilReroll(a.created)))]),t._m(2,!0)]],2)])}))],2)],1)])},o=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4"},[s("div",{staticClass:"single-quest loading-quest"}),s("div",{staticClass:"quest-xp loading-quest-footer"})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4"},[s("div",{staticClass:"single-quest loading-quest"}),s("div",{staticClass:"quest-xp loading-quest-footer"})])},function(){var t=this,s=t._self._c;return s("a",{staticClass:"mr-3 reroll-button-inactive"},[s("img",{attrs:{src:e(3913),alt:"Reroll"}})])}],l=(e(1703),e(127)),n=e(7484),c=e.n(n);const u=e(4110);c().extend(u);var d={data:()=>({error:"",showError:!1,quests:[],loading:!0}),components:{ProgressBar:l.Z},created(){this.getDailyQuests()},methods:{getTimeUntilReroll(t){const s=c()(t).add(24,"hours").fromNow();return`Can refresh ${s}`},getTimeUntilNextQuest(t){const s=c()(t).add(24,"hours").fromNow();return`New Quest ${s}`},getDailyQuests(){fetch(`/api/players/${this.$store.state.auth.userSteamID}/daily_quests`).then((t=>t.json()),(t=>{this.error=t,this.showError=!0,console.error(t)})).then((t=>{this.loading=!1,this.quests=t})).catch((t=>{this.error=t,this.showError=!0}))},rerollQuest(t,s){const{quest_id:e}=t;this.quests=this.quests.map((t=>t.quest_id===e?{...t,can_reroll:!1}:t)),fetch(`/api/players/${this.$store.state.auth.userSteamID}/daily_quests/reroll?questID=${e}`,{method:"post"}).then((t=>{if(!t.ok)throw Error(t.statusText);return t})).then((t=>t.json())).then((t=>{t.success&&(this.quests=this.quests.splice(s),this.getDailyQuests())})).catch((t=>{this.error=t,this.showError=!0}))},claimQuest(t){const{quest_id:s}=t;this.quests=this.quests.map((t=>t.quest_id===s?{...t,claimed:!0}:t)),fetch(`/api/players/${this.$store.state.auth.userSteamID}/daily_quests/claim?questID=${s}`,{method:"post"}).then((t=>t.json())).then((t=>{t.success&&(this.getDailyQuests(),this.$store.dispatch("REFRESH_BATTLE_PASS"),this.$store.dispatch("REFRESH_PLAYER"))})).catch((t=>{this.error=t,this.showError=!0}))}}},h=d,m=e(1001),_=(0,m.Z)(h,r,o,!1,null,"0d6d89f2",null),p=_.exports,g=function(){var t=this,s=t._self._c;return s("div",{staticClass:"pb-2",staticStyle:{"background-color":"#2d223b",border:"solid 1.1px #403652"}},[s("div",{staticClass:"d-flex justify-content-between px-3 py-3"},[s("span",[t._v("Login ("+t._s(t.numCompleted)+"/7)")])]),t.loading?s("div",{staticClass:"d-flex justify-content-between",staticStyle:{"overflow-x":"auto"}},t._l(7,(function(t){return s("div",{key:t,staticClass:"mx-3 single-quest",staticStyle:{width:"125px"}},[s("div",{staticStyle:{height:"48px"}}),s("div",{staticClass:"quest-xp",staticStyle:{height:"27px"}})])})),0):t._e(),t.loading?t._e():s("div",{staticClass:"d-flex justify-content-between",staticStyle:{"overflow-x":"auto"}},t._l(t.quests,(function(e){return s("div",{key:e.login_quest_id,staticClass:"mx-3 single-quest"},[e.claimed?s("div",{staticClass:"overlay"}):t._e(),s("div",{staticStyle:{height:"115px"}},[e.xp_reward>0?s("div",{staticClass:"quest-xp-text text-center p-3"},[t._v(" "+t._s(e.xp_reward)+" "+t._s(t.$t("common.xp"))+" ")]):t._e(),e.coin_reward>0?s("div",{staticClass:"pog-text text-center p-3"},[t._v(" "+t._s(e.coin_reward)+" "+t._s(t.$t("common.coins"))+" ")]):t._e(),e.cosmetic_name?s("img",{staticStyle:{height:"100%",width:"100%","object-fit":"cover"},attrs:{src:t.cosmeticImageSrc(e),alt:e.cosmetic_name}}):t._e()]),s("div",{staticClass:"text-center quest-xp py-1"},[t._v(" Day "+t._s(e.day)+" "),e.claimed?s("i",{staticClass:"fas fa-check ml-1"}):t._e()]),s("div",{staticClass:"text-center"},[e.completed&&!e.claimed?s("button",{staticClass:"btn btn-primary mt-2",attrs:{type:"button"},on:{click:function(s){return t.claimQuest(e)}}},[t._v(" Claim ")]):t._e()])])})),0)])},v=[],f={data:()=>({error:"",showError:!1,quests:[],loading:!0,numCompleted:0,daysUntilMonday:0}),created(){this.getLoginQuests(),this.daysUntilMonday=this.getDaysUntilMonday()},methods:{getDaysUntilMonday(){const t=new Date,s=t.getDay(),e=1+(s<1?7:0)-s;return 7+e},getLoginQuests(){fetch(`/api/players/${this.$store.state.auth.userSteamID}/login_quests`).then((t=>t.json()),(t=>{this.error=t,this.showError=!0,console.error(t)})).then((t=>{this.loading=!1,this.quests=t,this.numCompleted=t.filter((t=>t.completed)).length})).catch((t=>{this.error=t,this.showError=!0}))},tryComplete(){fetch(`/api/players/${this.$store.state.auth.userSteamID}/login_quests/try_complete`,{method:"post"}).then((t=>t.json())).then((t=>{t&&this.getLoginQuests()}))},claimQuest(t){const{login_quest_id:s}=t;this.quests=this.quests.map((t=>t.login_quest_id===s?{...t,claimed:!0}:t)),fetch(`/api/players/${this.$store.state.auth.userSteamID}/login_quests/claim?questID=${s}`,{method:"post"}).then((t=>t.json())).then((()=>{this.getLoginQuests(),this.$store.dispatch("REFRESH_BATTLE_PASS"),this.$store.dispatch("REFRESH_PLAYER")})).catch((t=>{this.error=t,this.showError=!0}))},cosmeticImageSrc(t){const{cosmetic_name:s}=t;return`/images/cosmetics/${s}.png`}}},y=f,x=(0,m.Z)(y,g,v,!1,null,"a27d1bfa",null),q=x.exports,C=function(){var t=this,s=t._self._c;return!t.loading&&t.quests.length>0?s("div",{staticClass:"pb-2 quests-background"},[s("div",{staticClass:"px-3 py-3"},[s("span",{directives:[{name:"t",rawName:"v-t",value:"profile.daily_quests",expression:"'profile.daily_quests'"}]})]),t.loading?s("div",{staticClass:"d-flex justify-content-between",staticStyle:{"overflow-x":"auto"}},t._l(7,(function(t){return s("div",{key:t,staticClass:"mx-3 single-quest",staticStyle:{width:"125px"}},[s("div",{staticStyle:{height:"48px"}}),s("div",{staticClass:"quest-xp",staticStyle:{height:"27px"}})])})),0):t._e(),t.loading?t._e():s("div",{staticClass:"d-flex justify-content-between",staticStyle:{"overflow-x":"auto"}},t._l(t.quests,(function(e){return s("div",{key:e.welcome_quest_id,staticClass:"mx-3 single-quest"},[e.claimed?s("div",{staticClass:"overlay"}):t._e(),e.coin_reward>0?s("div",{staticClass:"quest-xp-text text-center p-3"},[t._v(" "+t._s(e.coin_reward)+" "+t._s(t.$t("common.coins"))+" ")]):t._e(),e.cosmetic_name?s("img",{staticStyle:{height:"115px",width:"100%","object-fit":"cover"},attrs:{src:t.cosmeticImageSrc(e),alt:e.cosmetic_name}}):t._e(),s("div",{staticClass:"text-center quest-xp py-1"},[t._v(" Day "+t._s(e.day)+" "),e.claimed?s("i",{staticClass:"fas fa-check ml-1"}):t._e()]),s("div",{staticClass:"text-center"},[!e.claimed&&e.can_claim?s("button",{staticClass:"btn btn-primary mt-2",attrs:{type:"button"},on:{click:function(s){return t.claimQuest(e)}}},[t._v(" "+t._s(t.$t("common.claim"))+" ")]):t._e()])])})),0)]):t._e()},w=[],$={data:()=>({error:"",showError:!1,quests:[],loading:!0}),created(){this.getQuests()},methods:{getQuests(){fetch(`/api/players/${this.$store.state.auth.userSteamID}/welcome_quests`).then((t=>t.json()),(t=>{this.error=t,this.showError=!0,console.error(t)})).then((t=>{this.loading=!1,this.quests=t})).catch((t=>{this.error=t,this.showError=!0}))},claimQuest(t){const{welcome_quest_id:s}=t;this.quests=this.quests.map((t=>t.welcome_quest_id===s?{...t,claimed:!0}:t)),fetch(`/api/players/${this.$store.state.auth.userSteamID}/welcome_quests/claim?questID=${s}`,{method:"post"}).then((t=>t.json())).then((()=>{this.getQuests(),this.$store.dispatch("REFRESH_PLAYER"),this.$store.dispatch("REFRESH_BATTLE_PASS")})).catch((t=>{this.error=t,this.showError=!0}))},cosmeticImageSrc(t){const{cosmetic_name:s}=t;return`/images/cosmetics/${s}.png`}}},b=$,S=(0,m.Z)(b,C,w,!1,null,"47c1475f",null),E=S.exports,k=e(3508),D={components:{DailyQuests:p,LoginQuests:q,WelcomeQuests:E,PlayerGamesList:k["default"]},data:()=>({error:"",games:[],playerStats:{},plusBenefits:{},gamesLoading:!0,secondsUntilReset:0}),computed:{steamID(){return this.$store.state.auth.userSteamID},hasPlus(){return this.$store.state.auth.hasPlus},isAdmin(){return this.$store.getters.isAdmin}},methods:{getPlusBenefits(){fetch(`/api/players/${this.steamID}/plus_benefits`).then((t=>t.json())).then((t=>{this.plusBenefits=t}))}},created(){fetch(`/api/players/${this.steamID}/games?limit=3`).then((t=>t.json())).then((t=>{this.gamesLoading=!1,this.games=t})),fetch(`/api/players/${this.steamID}/stats`).then((t=>t.json())).then((t=>{this.player=t})).catch((t=>{console.error("Error fetching player stats",t)})),this.hasPlus&&this.getPlusBenefits()}},Q=D,R=(0,m.Z)(Q,a,i,!1,null,null,null),I=R.exports},3913:function(t,s,e){t.exports=e.p+"img/reroll.d5cccf28.svg"}}]);
//# sourceMappingURL=793.192bf12e.js.map