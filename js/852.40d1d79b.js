"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[852],{3516:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return"object"===typeof t.getDescription()?e("div",[e("ul",{staticClass:"text-left"},t._l(t.getDescription(),(function(s){return e("li",{key:s},[t._v(" "+t._s(s)+" ")])})),0)]):"string"===typeof t.getDescription()?e("div",[t._v(" "+t._s(t.getDescription())+" ")]):e("div",[t._v(t._s(t.getDescription()))])},i=[],r={props:{cosmetic:{}},methods:{getDescription(){return this.$i18n.t(`cosmetic_descriptions.${this.cosmetic.cosmetic_name}`)}}},l=r,A=s(1001),n=(0,A.Z)(l,a,i,!1,null,null,null),c=n.exports},7852:function(t,e,s){s.r(e),s.d(e,{default:function(){return o}});var a=function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"page-title"},[t._v(t._s(t.$t("battle_pass.page_title")))]),e("div",{staticClass:"timeline"},[e("ul",{staticClass:"battlepass-timeline"},t._l(50,(function(a){return e("li",{key:a},[e("div",{staticClass:"timeline-container",class:{left:a%2===0,right:a%2===1}},[e("div",{staticClass:"timeline-content"},[e("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.html",modifiers:{hover:!0,html:!0}}],attrs:{title:`${t.$t("battle_pass.level_tooltip",{total_xp:t.getLevelTotalXP(a),next_level:t.getNextLevelXP(a)})}`}},[t._v(" "+t._s(t.$t("battle_pass.level"))+" "+t._s(a)+" "),t.getLevelLocked(a)?e("i",{staticClass:"fas fa-lock info-icon"}):t._e()]),e("div",{class:{"lvl-wrapper":!0,"lvl-locked":a>t.bpLevel||t.getLevelLocked(a)}},[e("div",[t.loading?[e("img",{attrs:{src:s(3394),alt:"placeholder"}})]:[t.getItemImage(a)?e("img",{attrs:{src:t.getItemImage(a),alt:t.getRewardItem(a)},on:{click:function(e){return t.$bvModal.show(`bp-modal-${a}`)}}}):t._e(),t.getRewardItem(a)?e("b-modal",{attrs:{id:`bp-modal-${a}`,centered:"","hide-header":"","hide-footer":""}},[e("h2",{staticClass:"mb-2 text-center"},[t._v(" "+t._s(t.getTranslatedItemName(a))+" ")]),e("div",{staticClass:"text-center"},[e("div",[t.getItemImage(a)?e("img",{staticClass:"mb-2",attrs:{src:t.getItemImage(a),alt:t.getRewardItem(a)}}):t._e()]),e("CosmeticDescription",{attrs:{cosmetic:t.getRewards(a)}})],1)]):t._e()]],2),e("div",{staticClass:"claim-button"},[t.getLevelCanClaim(a)?e("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.claimReward(a)}}},[t._v(" "+t._s(t.$t("common.claim"))+" "),t.levelLoading(a)?e("b-spinner",{attrs:{small:"",label:t.Loading}}):t._e()],1):t._e()],1)])])])])})),0)])])},i=[],r=s(3516),l={components:{CosmeticDescription:r.Z},data:()=>({error:"",rewards:[],loading:!0}),created(){this.fetchBattlePass()},computed:{bpLevel(){return this.$store.getters.bpLevel},bpUpgraded(){return this.$store.getters.bpUpgraded},steamID(){return this.$store.state.auth.userSteamID}},methods:{fetchBattlePass(){fetch(`/api/players/${this.steamID}/battle_pass/levels`).then((t=>t.json())).then((t=>{this.rewards=t,this.loading=!1})).catch((t=>this.error=t))},claimReward(t){const e=this.getRewards(t);e.loading=!0,fetch(`/api/players/${this.steamID}/battle_pass/claim?level=${t}`,{method:"post"}).then((t=>t.json())).then((t=>{e.claimed=t,e.loading=!1,this.fetchBattlePass(),this.$store.dispatch("REFRESH_PLAYER")})).catch((()=>t.loading=!1))},isEven(t){return t%2===0},getRewards(t){return this.rewards.find((e=>e.bp_level===t))},levelLoading(t){return this.getRewards(t)?.loading},getRewardItem(t){const e=this.getRewards(t)?.cosmetic_name;return e},getTranslatedItemName(t){const e=this.getRewards(t)?.cosmetic_name,s=`cosmetics.${e}`;return this.$i18n.t(s)},getTranslatedDescription(t){const e=this.getRewards(t)?.cosmetic_name,s=`cosmetic_descriptions.${e}`;return this.$i18n.t(s)},getLevelTotalXP(t){return this.getRewards(t)?this.getRewards(t).total_xp.toLocaleString():null},getNextLevelXP(t){return this.getRewards(t)?this.getRewards(t).next_level_xp.toLocaleString():null},getLevelLocked(t){return!!this.getRewards(t)&&(!this.bpUpgraded&&!this.getRewards(t).free)},getLevelClaimed(t){return!!this.getRewards(t)&&this.getRewards(t).claimed},getLevelCanClaim(t){return!!this.getRewards(t)&&this.getRewards(t).can_claim},hasItemReward(t){return null!==this.getRewards(t)?.cosmetic_id},getItemImage(t){const e=this.getRewardItem(t);return e?`/images/cosmetics/${e}.png`:s(3394)}}},A=l,n=s(1001),c=(0,n.Z)(A,a,i,!1,null,"61cf199c",null),o=c.exports},3394:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADaBAMAAAARaBA9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURVRVVgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH2lNY0AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAsSURBVHja7cExAQAAAMKg9U9tCj8gAAAAAAAAAAAAAAAAAAAAAAAAAAAALmpWAgABjEnkqQAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=852.40d1d79b.js.map