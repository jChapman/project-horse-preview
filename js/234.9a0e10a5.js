"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[234],{2234:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var i=function(){var e=this,t=e._self._c;return t("div",[t("h1",{directives:[{name:"t",rawName:"v-t",value:"achievements.page_title",expression:"'achievements.page_title'"}],staticClass:"page-title"}),t("div",[""!=e.error?t("b-alert",{attrs:{show:"",variant:"danger",dismissible:""}},[e._v(e._s(e.error))]):e._e(),e.loading?t("div",{staticClass:"d-flex justify-content-center mb-3"},[t("b-spinner",{attrs:{label:"Loading..."}})],1):e._e(),e._l(e.achievements,(function(s){return t("div",{key:s.quest_id,staticClass:"row"},[t("div",{staticClass:"col-xl-12"},[t("div",{staticClass:"achievement"},[t("div",{staticClass:"achievement-row"},[t("div",{staticClass:"description"},[e._l(s.questTier,(function(e){return t("i",{key:e,staticClass:"fas fa-star mb-2"})})),t("h3",[e._v(e._s(s.quest_name))]),t("p",{staticClass:"achievement-description"},[e._v(" "+e._s(s.quest_description)+" ")])],2),t("div",{staticClass:"rewards"},[s.coin_reward>0?t("p",{staticClass:"pog-text"},[e._v(" "+e._s(s.coin_reward)+" GOLD ")]):e._e(),t("p",{staticClass:"quest-xp-text"},[e._v(e._s(s.xp_reward)+" XP")])])]),t("ProgressBar",{attrs:{progress:s.capped_quest_progress,required:s.required_amount}}),s.quest_completed&&!s.claimed?t("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"button"},on:{click:function(t){return e.claimQuest(s)}}},[e._v(" "+e._s(e.$t("common.claim"))+" ")]):e._e()],1)])])}))],2)])},a=[],r=(s(1703),s(127)),n={data:()=>({error:"",achievements:[],loading:!0}),components:{ProgressBar:r.Z},created(){this.getAchievements()},methods:{getProgressPercent(e){const t=e.capped_quest_progress,s=e.required_amount,i=Math.min(100*t/s,100);return i},getAchievements(){fetch(`/api/players/${this.$store.state.auth.userSteamID}/achievements`).then((e=>e.json())).then((e=>{this.loading=!1,this.achievements=e}))},claimQuest(e){const{quest_id:t}=e;this.achievements=this.achievements.map((e=>e.quest_id===t?{...e,claimed:!0}:e)),fetch(`/api/players/${this.$store.state.auth.userSteamID}/achievements/claim?questID=${t}`,{method:"post"}).then((e=>{if(!e.ok)throw Error(e.statusText);return e})).then((e=>e.json())).then((e=>{e.success&&(this.getAchievements(),this.$store.dispatch("REFRESH_BATTLE_PASS"),this.$store.dispatch("REFRESH_PLAYER"))})).catch((e=>{this.error=e,window.scroll({top:0,left:0,behavior:"smooth"})}))}}},c=n,o=s(1001),l=(0,o.Z)(c,i,a,!1,null,"a6759056",null),h=l.exports}}]);
//# sourceMappingURL=234.9a0e10a5.js.map