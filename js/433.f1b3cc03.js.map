{"version":3,"file":"js/433.f1b3cc03.js","mappings":"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","sources":["webpack://client/./src/components/pages/cosmetics/CosmeticDescription.vue","webpack://client/src/components/pages/cosmetics/CosmeticDescription.vue","webpack://client/./src/components/pages/cosmetics/CosmeticDescription.vue?252a","webpack://client/./src/components/pages/cosmetics/CosmeticDescription.vue?7df0","webpack://client/./src/components/pages/store/Checkout2.vue","webpack://client/./src/components/pages/store/components/StripeWeChatPay.vue","webpack://client/src/components/pages/store/components/StripeWeChatPay.vue","webpack://client/./src/components/pages/store/components/StripeWeChatPay.vue?18e2","webpack://client/./src/components/pages/store/components/StripeWeChatPay.vue?9dad","webpack://client/src/components/pages/store/Checkout2.vue","webpack://client/./src/components/pages/store/Checkout2.vue?c72e","webpack://client/./src/components/pages/store/Checkout2.vue?ea79","webpack://client/./src/components/pages/store/components/PaypalPurchase.vue","webpack://client/src/components/pages/store/components/PaypalPurchase.vue","webpack://client/./src/components/pages/store/components/PaypalPurchase.vue?7c33","webpack://client/./src/components/pages/store/components/PaypalPurchase.vue?53a7","webpack://client/./src/components/pages/store/components/StripeAlipay.vue","webpack://client/src/components/pages/store/components/StripeAlipay.vue","webpack://client/./src/components/pages/store/components/StripeAlipay.vue?099f","webpack://client/./src/components/pages/store/components/StripeAlipay.vue?a463","webpack://client/./src/components/pages/store/components/StripePurchase.vue","webpack://client/src/components/pages/store/components/StripePurchase.vue","webpack://client/./src/components/pages/store/components/StripePurchase.vue?0a1d","webpack://client/./src/components/pages/store/components/StripePurchase.vue?66f1"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (typeof _vm.getDescription() === 'object')?_c('div',[_c('ul',{staticClass:\"text-left\"},_vm._l((_vm.getDescription()),function(line){return _c('li',{key:line},[_vm._v(\" \"+_vm._s(line)+\" \")])}),0)]):(typeof _vm.getDescription() === 'string')?_c('div',[_vm._v(\" \"+_vm._s(_vm.getDescription())+\" \")]):_c('div',[_vm._v(_vm._s(_vm.getDescription()))])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"typeof getDescription() === 'object'\">\n    <ul class=\"text-left\">\n      <li v-for=\"line in getDescription()\" :key=\"line\">\n        {{ line }}\n      </li>\n    </ul>\n  </div>\n  <div v-else-if=\"typeof getDescription() === 'string'\">\n    {{ getDescription() }}\n  </div>\n  <div v-else>{{ getDescription() }}</div>\n</template>\n\n<script>\nexport default {\n  props: {\n    cosmetic: {},\n  },\n  methods: {\n    getDescription() {\n      return this.$i18n.t(\n        `cosmetic_descriptions.${this.cosmetic.cosmetic_name}`\n      );\n    },\n  },\n};\n</script>\n\n<style>\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CosmeticDescription.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CosmeticDescription.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CosmeticDescription.vue?vue&type=template&id=ea415aa6&\"\nimport script from \"./CosmeticDescription.vue?vue&type=script&lang=js&\"\nexport * from \"./CosmeticDescription.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h1',{directives:[{name:\"t\",rawName:\"v-t\",value:('store.checkout_title'),expression:\"'store.checkout_title'\"}],staticClass:\"page-title\"}),_c('div',{staticClass:\"container text-center\"},[_c('b-alert',{attrs:{\"variant\":\"danger\",\"dismissible\":\"\"},model:{value:(_vm.showGeneralError),callback:function ($$v) {_vm.showGeneralError=$$v},expression:\"showGeneralError\"}},[_vm._v(_vm._s(_vm.generalError))]),_vm._l((_vm.items),function(item){return _c('div',{key:item.cosmetic_id,staticClass:\"item-card\"},[_c('div',{staticClass:\"item-card-img\"},[_c('img',{staticClass:\"preview-image\",attrs:{\"src\":_vm.cosmeticImageSrc(item),\"alt\":item.cosmetic_name}})]),_c('div',{staticClass:\"item-card-body\"},[_c('div',{staticClass:\"mb-2\"},[_vm._v(\" \"+_vm._s(_vm.$t(`cosmetics.${item.cosmetic_name}`))+\" \")]),_c('CosmeticDescription',{staticClass:\"mb-2 text-muted\",attrs:{\"cosmetic\":item}}),_c('strong',[_vm._v(\"$\"+_vm._s(item.cost_usd))])],1)])}),_c('div',{staticClass:\"item-card text-align-right\"},[_c('div',{staticClass:\"item-card-body\"},[(_vm.totalXp != 0)?_c('div',{staticClass:\"mb-2\"},[_c('span',{staticClass:\"mr-2\"},[_vm._v(_vm._s(_vm.$t(\"store.totalXp\")))]),_c('strong',[_vm._v(_vm._s(_vm.totalXp))])]):_vm._e(),_c('div',[_c('span',{staticClass:\"mr-2\"},[_vm._v(_vm._s(_vm.$t(\"store.subtotal\")))]),_c('strong',[_vm._v(\"$\"+_vm._s(_vm.totalCost))])])])]),(_vm.containsPurchasedBattlePass)?[_c('div',[_vm._v(\"You have already upgraded your battle pass!\")])]:[(_vm.loggedIn && _vm.validPurchase)?[(_vm.loading)?_c('div',{staticClass:\"d-flex justify-content-center mb-3\"},[_c('b-spinner',{attrs:{\"label\":\"Loading...\"}})],1):_c('b-card',{staticClass:\"mt-3\",staticStyle:{\"max-width\":\"300px\",\"margin\":\"auto\"}},[_c('StripePurchase',{staticClass:\"my-3\",attrs:{\"items\":_vm.items},on:{\"purchaseSuccess\":_vm.onPurchaseSuccess,\"error\":_vm.onError}}),_c('StripeAlipay',{staticClass:\"mb-3\",attrs:{\"items\":_vm.items}}),_c('StripeWeChatPay',{staticClass:\"mb-3\",attrs:{\"items\":_vm.items}}),_c('PaypalPurchase',{attrs:{\"items\":_vm.items,\"paypalType\":_vm.paypalType},on:{\"purchaseSuccess\":_vm.onPurchaseSuccess,\"purchaseError\":_vm.onError}}),_c('b-alert',{attrs:{\"variant\":\"danger\",\"dismissible\":\"\"},model:{value:(_vm.showError),callback:function ($$v) {_vm.showError=$$v},expression:\"showError\"}},[_vm._v(_vm._s(_vm.error))])],1)]:[(_vm.validPurchase)?[_c('LoginButton',{staticClass:\"mx-auto\",staticStyle:{\"max-width\":\"300px\"}})]:_vm._e()]]],2),_c('div',{staticClass:\"text-center mt-4\"},[_c('b-button',{staticClass:\"mx-auto\",attrs:{\"to\":\"/store\"}},[_vm._v(_vm._s(_vm.$t(\"store.back_to_store\")))])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":!_vm.complete},on:{\"click\":_vm.goToWechat}},[_vm._v(_vm._s(_vm.$t(\"store.pay_with_wechat\"))+\" \")]),_c('b-alert',{attrs:{\"variant\":\"danger\",\"dismissible\":\"\"},model:{value:(_vm.showError),callback:function ($$v) {_vm.showError=$$v},expression:\"showError\"}},[_vm._v(_vm._s(_vm.error))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-button variant=\"primary\" @click=\"goToWechat\" :disabled=\"!complete\"\n      >{{ $t(\"store.pay_with_wechat\") }}\n    </b-button>\n    <b-alert v-model=\"showError\" variant=\"danger\" dismissible>{{\n      error\n    }}</b-alert>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    items: [],\n  },\n\n  data: () => ({\n    error: \"\",\n    showError: false,\n    clientSecret: \"\",\n    qrCodeUrl: \"\",\n    paymentStatus: \"\",\n    complete: false,\n    keys: {\n      dev: \"pk_test_kG4TReBTkO6yDfO9mMwtShME00mx65Yyw2\",\n      prod: \"pk_live_FlJcVm7zuiGei0k6IDXksnmy003GNNZuiw\",\n    },\n  }),\n\n  created() {\n    const isDev = process.env.NODE_ENV == \"development\";\n    const key = isDev ? this.keys.dev : this.keys.prod;\n    const stripe = window.Stripe(key);\n    this.stripe = stripe;\n    const rootUrl = isDev\n      ? \"http://localhost:8080\"\n      : \"https://abilityarena.com\";\n    let amount = this.items.reduce((acc, item) => {\n      return acc + item.cost_usd * 100;\n    }, 0);\n    amount = Math.round(amount);\n    const itemIDs = this.$route.params.item_ids;\n\n    stripe\n      .createSource({\n        type: \"wechat\",\n        amount,\n        currency: \"usd\",\n        metadata: {\n          cosmeticIDs: JSON.stringify(\n            this.items.map((item) => item.cosmetic_id)\n          ),\n          steamID: this.$store.state.auth.userSteamID,\n        },\n        redirect: {\n          return_url: `${rootUrl}/wechat_payment?item_id=${itemIDs}`,\n        },\n      })\n      .then((result) => {\n        console.log(result);\n        if (result.error) {\n          this.error = result.error.message;\n          this.showError = true;\n        } else {\n          const source = result.source;\n          this.clientSecret = source.client_secret;\n          this.qrCodeUrl = source.wechat.qr_code_url;\n          this.paymentStatus = source.status;\n          this.complete = true;\n        }\n      });\n  },\n\n  methods: {\n    goToWechat() {\n      window.location.href = this.qrCodeUrl;\n    },\n  },\n};\n</script>\n\n<style>\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StripeWeChatPay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StripeWeChatPay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StripeWeChatPay.vue?vue&type=template&id=53f519a1&\"\nimport script from \"./StripeWeChatPay.vue?vue&type=script&lang=js&\"\nexport * from \"./StripeWeChatPay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <h1 class=\"page-title\" v-t=\"'store.checkout_title'\"></h1>\n    <div class=\"container text-center\">\n      <b-alert v-model=\"showGeneralError\" variant=\"danger\" dismissible>{{\n        generalError\n      }}</b-alert>\n\n      <div v-for=\"item in items\" :key=\"item.cosmetic_id\" class=\"item-card\">\n        <div class=\"item-card-img\">\n          <img\n            v-bind:src=\"cosmeticImageSrc(item)\"\n            :alt=\"item.cosmetic_name\"\n            class=\"preview-image\"\n          />\n        </div>\n        <div class=\"item-card-body\">\n          <div class=\"mb-2\">\n            {{ $t(`cosmetics.${item.cosmetic_name}`) }}\n          </div>\n          <CosmeticDescription :cosmetic=\"item\" class=\"mb-2 text-muted\" />\n          <strong>${{ item.cost_usd }}</strong>\n        </div>\n      </div>\n      <!-- subtotal  -->\n      <div class=\"item-card text-align-right\">\n        <div class=\"item-card-body\">\n          <div v-if=\"totalXp != 0\" class=\"mb-2\">\n            <span class=\"mr-2\">{{ $t(\"store.totalXp\") }}</span>\n            <strong>{{ totalXp }}</strong>\n          </div>\n          <div>\n            <span class=\"mr-2\">{{ $t(\"store.subtotal\") }}</span>\n            <strong>${{ totalCost }}</strong>\n          </div>\n        </div>\n      </div>\n\n      <template v-if=\"containsPurchasedBattlePass\">\n        <div>You have already upgraded your battle pass!</div>\n      </template>\n      <template v-else>\n        <template v-if=\"loggedIn && validPurchase\">\n          <div v-if=\"loading\" class=\"d-flex justify-content-center mb-3\">\n            <b-spinner label=\"Loading...\"></b-spinner>\n          </div>\n          <b-card v-else class=\"mt-3\" style=\"max-width: 300px; margin: auto\">\n            <StripePurchase\n              class=\"my-3\"\n              :items=\"items\"\n              v-on:purchaseSuccess=\"onPurchaseSuccess\"\n              v-on:error=\"onError\"\n            />\n            <StripeAlipay :items=\"items\" class=\"mb-3\" />\n            <StripeWeChatPay :items=\"items\" class=\"mb-3\" />\n            <PaypalPurchase\n              :items=\"items\"\n              :paypalType=\"paypalType\"\n              v-on:purchaseSuccess=\"onPurchaseSuccess\"\n              v-on:purchaseError=\"onError\"\n            />\n            <b-alert v-model=\"showError\" variant=\"danger\" dismissible>{{\n              error\n            }}</b-alert>\n          </b-card>\n        </template>\n        <template v-else>\n          <template v-if=\"validPurchase\">\n            <LoginButton class=\"mx-auto\" style=\"max-width: 300px\"></LoginButton>\n          </template>\n        </template>\n      </template>\n    </div>\n\n    <div class=\"text-center mt-4\">\n      <b-button class=\"mx-auto\" to=\"/store\">{{\n        $t(\"store.back_to_store\")\n      }}</b-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport LoginButton from \"../../utility/LoginButton.vue\";\nimport CosmeticDescription from \"../cosmetics/CosmeticDescription.vue\";\nimport StripePurchase from \"./components/StripePurchase.vue\";\nimport StripeAlipay from \"./components/StripeAlipay.vue\";\nimport StripeWeChatPay from \"./components/StripeWeChatPay.vue\";\nimport PaypalPurchase from \"./components/PaypalPurchase.vue\";\n\nexport default {\n  components: {\n    LoginButton,\n    CosmeticDescription,\n    PaypalPurchase,\n    StripePurchase,\n    StripeAlipay,\n    StripeWeChatPay,\n  },\n\n  data() {\n    return {\n      items: [],\n      error: \"\",\n      showError: false,\n      showGeneralError: false,\n      generalError: \"\",\n      loading: true,\n      validPurchase: true,\n    };\n  },\n\n  computed: {\n    loggedIn() {\n      return this.$store.getters.loggedIn;\n    },\n    bpUpgraded() {\n      return this.$store.getters.bpUpgraded;\n    },\n    paypalType() {\n      const totalCost = this.items.reduce((acc, item) => {\n        return acc + item.cost_usd;\n      }, 0);\n      return totalCost < 12 ? \"cheap\" : \"expensive\";\n    },\n    totalCost() {\n      return this.items\n        .reduce((acc, item) => {\n          return acc + item.cost_usd;\n        }, 0)\n        .toLocaleString();\n    },\n    totalXp() {\n      return this.items\n        .reduce((acc, item) => {\n          if (item.cosmetic_name.startsWith(\"buy_xp_\")) {\n            const xp = Number(item.cosmetic_name.slice(7));\n            return acc + xp;\n          }\n          return acc;\n        }, 0)\n        .toLocaleString();\n    },\n    containsPurchasedBattlePass() {\n      return (\n        this.$store.getters.bpUpgraded &&\n        this.items.some((item) => item.cosmetic_name === \"buy_bp\")\n      );\n    },\n  },\n\n  methods: {\n    onPurchaseSuccess() {\n      this.$router.push(\"/payment_success\");\n    },\n    onError(error) {\n      this.error = error;\n      this.showError = true;\n    },\n    cosmeticImageSrc(cosmetic) {\n      const { cosmetic_name } = cosmetic;\n      return `/images/cosmetics/${cosmetic_name}.png`;\n    },\n  },\n\n  created() {\n    const cosmeticIDs = this.$route.params.item_ids.split(\"/\");\n    fetch(`/api/cosmetics/get_cosmetics`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ cosmeticIDs }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        this.loading = false;\n\n        if (data.some((item) => item.cost_usd <= 0)) {\n          this.generalError =\n            \"Trying to purchase an invalid item (not purchaseable)\";\n          this.showGeneralError = true;\n          this.validPurchase = false;\n        }\n        if (data.some((item) => !item.cosmetic_id)) {\n          this.generalError = \"Invalid item(s)!\";\n          this.showGeneralError = true;\n          this.validPurchase = false;\n        }\n        this.items = data;\n      })\n      .catch(() => {\n        this.error = \"Error loading cosmetic data\";\n        this.showError = true;\n        this.loading = false;\n      });\n  },\n};\n</script>\n\n<style scoped>\n.preview-image {\n  width: 100%;\n}\n\n.item-card {\n  width: 500px;\n  display: flex;\n  align-items: center;\n\n  background-color: var(--primary-color-light);\n  color: white;\n  border-radius: 5px;\n  box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2);\n  margin: auto;\n  margin-top: 20px;\n  margin-bottom: 20px;\n  padding: 10px;\n}\n\n.item-card-img {\n  width: 200px;\n  height: auto;\n}\n\n.item-card-body {\n  width: 100%;\n  text-align: right;\n  color: white;\n}\n\n.text-muted {\n  color: #a493d2 !important;\n}\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Checkout2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Checkout2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Checkout2.vue?vue&type=template&id=550d1db0&scoped=true&\"\nimport script from \"./Checkout2.vue?vue&type=script&lang=js&\"\nexport * from \"./Checkout2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Checkout2.vue?vue&type=style&index=0&id=550d1db0&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"550d1db0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b-alert',{attrs:{\"variant\":\"danger\",\"dismissible\":\"\"},model:{value:(_vm.showError),callback:function ($$v) {_vm.showError=$$v},expression:\"showError\"}},[_vm._v(_vm._s(_vm.error))]),_c('b-alert',{attrs:{\"variant\":\"success\",\"dismissible\":\"\"},model:{value:(_vm.showSuccess),callback:function ($$v) {_vm.showSuccess=$$v},expression:\"showSuccess\"}},[_vm._v(_vm._s(_vm.success))]),(_vm.processingPayment)?_c('div',[_vm._v(\" \"+_vm._s(_vm.$t(\"store.processing\"))+\" \"),(_vm.loading)?_c('div',{staticClass:\"d-flex justify-content-center mb-3\"},[_c('b-spinner',{attrs:{\"label\":\"Loading...\"}})],1):_vm._e()]):_c('div',{ref:\"paypal\",staticClass:\"paypal-container\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-alert v-model=\"showError\" variant=\"danger\" dismissible>{{\n      error\n    }}</b-alert>\n    <b-alert v-model=\"showSuccess\" variant=\"success\" dismissible>{{\n      success\n    }}</b-alert>\n    <div v-if=\"processingPayment\">\n      {{ $t(\"store.processing\") }}\n      <div v-if=\"loading\" class=\"d-flex justify-content-center mb-3\">\n        <b-spinner label=\"Loading...\"></b-spinner>\n      </div>\n    </div>\n    <div v-else class=\"paypal-container\" ref=\"paypal\"></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    items: [],\n    paypalType: String,\n  },\n\n  data() {\n    return {\n      error: \"\",\n      showError: false,\n      success: \"\",\n      showSuccess: false,\n      processingPayment: false,\n      loading: false,\n      credentials: null,\n      keys: {\n        dev: {\n          cheap:\n            \"AYAmQijTIaUAckei3KBH9rJh7Vea0lmIuUZclFx5RWUfhaG6OfcG7w_IOZclheI431gFF0ETdwfhnWbU\",\n          expensive:\n            \"AYAmQijTIaUAckei3KBH9rJh7Vea0lmIuUZclFx5RWUfhaG6OfcG7w_IOZclheI431gFF0ETdwfhnWbU\",\n        },\n        prod: {\n          cheap:\n            \"ARyCiFJGaPqBv5V0OJNPloAOgwUDp-YOu2cLtrp8fdTLlpBCaIfbXhnFHfVuMylXG9iyPaKCw2SR2D4V\",\n          expensive:\n            \"ARyCiFJGaPqBv5V0OJNPloAOgwUDp-YOu2cLtrp8fdTLlpBCaIfbXhnFHfVuMylXG9iyPaKCw2SR2D4V\",\n        },\n      },\n    };\n  },\n\n  mounted() {\n    const isDev = process.env.NODE_ENV == \"development\";\n    this.credentials = isDev ? this.keys.dev : this.keys.prod;\n    const script = document.createElement(\"script\");\n    const clientID =\n      this.paypalType === \"cheap\"\n        ? this.credentials.cheap\n        : this.credentials.expensive;\n    script.src = `https://www.paypal.com/sdk/js?client-id=${clientID}`;\n    script.addEventListener(\"load\", this.setLoaded);\n    document.body.appendChild(script);\n  },\n\n  methods: {\n    setLoaded() {\n      // \"this\" doesn't work in window.paypal because javascript sucks\n      const steamID = this.$store.state.auth.userSteamID;\n      const costUSD =\n        Math.round(\n          this.items.reduce((acc, item) => {\n            return acc + item.cost_usd;\n          }, 0) * 100\n        ) / 100;\n\n      const paypalType = this.paypalType;\n      const _this = this;\n      window.paypal\n        .Buttons({\n          style: {\n            size: \"small\",\n            color: \"gold\",\n            shape: \"pill\",\n            label: \"checkout\",\n            layout: \"horizontal\",\n          },\n          createOrder: (data, actions) => {\n            return actions.order.create({\n              purchase_units: [\n                {\n                  amount: {\n                    currency_code: \"USD\",\n                    value: costUSD,\n                  },\n                },\n              ],\n              application_context: { shipping_preference: \"NO_SHIPPING\" },\n            });\n          },\n          onApprove: (data) => {\n            _this.processingPayment = true;\n            return fetch(`/api/payments/paypal/${steamID}`, {\n              method: \"post\",\n              headers: {\n                \"content-type\": \"application/json\",\n              },\n              body: JSON.stringify({\n                orderID: data.orderID,\n                cosmeticIDs: this.items.map((item) => item.cosmetic_id),\n                paypalType,\n              }),\n            })\n              .then((res) => res.json())\n              .then((res) => {\n                _this.processingPayment = false;\n                if (res.message === \"Payment Success\") {\n                  _this.$store.dispatch(\"REFRESH_PLAYER\");\n                  _this.$emit(\"purchaseSuccess\");\n                } else {\n                  console.error(res.message);\n                  _this.$emit(\"purchaseError\", res.message);\n                }\n              })\n              .catch((err) => {\n                _this.processingPayment = false;\n                console.error(err);\n                _this.$emit(\"purchaseError\", err);\n              });\n          },\n          onError: (err) => {\n            console.error(err);\n            _this.$emit(\"purchaseError\", err);\n          },\n        })\n        .render(this.$refs.paypal);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.purchase-preview {\n  width: 200px;\n  height: 200px;\n}\n\n.paypal-container {\n  max-width: 200px;\n  margin: auto;\n}\n\n.payment-card {\n  max-width: 400px;\n  margin: auto;\n}\n\n.card {\n  color: black !important;\n}\n\n.card-footer {\n  height: 100% !important;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PaypalPurchase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PaypalPurchase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaypalPurchase.vue?vue&type=template&id=22459189&scoped=true&\"\nimport script from \"./PaypalPurchase.vue?vue&type=script&lang=js&\"\nexport * from \"./PaypalPurchase.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PaypalPurchase.vue?vue&type=style&index=0&id=22459189&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22459189\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('b-button',{attrs:{\"variant\":\"primary\",\"disabled\":!_vm.complete},on:{\"click\":_vm.goToAlipay}},[_vm._v(_vm._s(_vm.$t(\"store.pay_with_alipay\")))]),_c('b-alert',{attrs:{\"variant\":\"danger\",\"dismissible\":\"\"},model:{value:(_vm.showError),callback:function ($$v) {_vm.showError=$$v},expression:\"showError\"}},[_vm._v(_vm._s(_vm.error))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <b-button variant=\"primary\" @click=\"goToAlipay\" :disabled=\"!complete\">{{\n      $t(\"store.pay_with_alipay\")\n    }}</b-button>\n    <b-alert v-model=\"showError\" variant=\"danger\" dismissible>{{\n      error\n    }}</b-alert>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    items: [],\n  },\n\n  data: () => ({\n    error: \"\",\n    showError: false,\n    clientSecret: \"\",\n    alipayRedirect: \"\",\n    alipayStatus: \"\",\n    complete: false,\n    keys: {\n      dev: \"pk_test_kG4TReBTkO6yDfO9mMwtShME00mx65Yyw2\",\n      prod: \"pk_live_FlJcVm7zuiGei0k6IDXksnmy003GNNZuiw\",\n    },\n  }),\n\n  created() {\n    const isDev = process.env.NODE_ENV == \"development\";\n    const key = isDev ? this.keys.dev : this.keys.prod;\n    const stripe = window.Stripe(key);\n    this.stripe = stripe;\n    const rootUrl = isDev\n      ? \"http://localhost:8080\"\n      : \"https://abilityarena.com\";\n    let amount = this.items.reduce((acc, item) => {\n      return acc + item.cost_usd * 100;\n    }, 0);\n    amount = Math.round(amount);\n    const itemIDs = this.$route.params.item_ids;\n\n    stripe\n      .createSource({\n        type: \"alipay\",\n        amount,\n        currency: \"usd\",\n        metadata: {\n          cosmeticIDs: JSON.stringify(\n            this.items.map((item) => item.cosmetic_id)\n          ),\n          steamID: this.$store.state.auth.userSteamID,\n        },\n        redirect: {\n          return_url: `${rootUrl}/alipay_payment?item_id=${itemIDs}`,\n        },\n      })\n      .then((result) => {\n        if (result.error) {\n          this.error = result.error.message;\n          this.showError = true;\n        } else {\n          const source = result.source;\n          this.clientSecret = source.client_secret;\n          this.alipayRedirect = source.redirect.url;\n          this.alipayStatus = source.status;\n          this.complete = true;\n        }\n      });\n  },\n\n  methods: {\n    goToAlipay() {\n      window.location.href = this.alipayRedirect;\n    },\n  },\n};\n</script>\n\n<style>\n</style>","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StripeAlipay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StripeAlipay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StripeAlipay.vue?vue&type=template&id=5acb8be4&\"\nimport script from \"./StripeAlipay.vue?vue&type=script&lang=js&\"\nexport * from \"./StripeAlipay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{ref:\"card\"}),_c('b-button',{staticClass:\"mt-3\",attrs:{\"variant\":\"primary\",\"disabled\":!_vm.paymentIntent || !_vm.complete},on:{\"click\":_vm.submitPayment}},[_vm._v(\" \"+_vm._s(_vm.$t(\"store.pay_with_stripe\"))+\" \"),(_vm.awaitingPayment)?_c('b-spinner',{attrs:{\"small\":\"\",\"label\":_vm.$t('store.loading')}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div ref=\"card\"></div>\n    <b-button\n      variant=\"primary\"\n      @click=\"submitPayment\"\n      :disabled=\"!paymentIntent || !complete\"\n      class=\"mt-3\"\n    >\n      {{ $t(\"store.pay_with_stripe\") }}\n      <b-spinner\n        small\n        v-if=\"awaitingPayment\"\n        :label=\"$t('store.loading')\"\n      ></b-spinner>\n    </b-button>\n  </div>\n</template>\n\n<script>\nlet card = undefined;\nexport default {\n  props: {\n    items: [],\n  },\n\n  data: () => ({\n    error: \"\",\n    showError: false,\n    complete: false,\n    paymentIntent: false,\n    clientSecret: \"\",\n    awaitingPayment: false,\n    keys: {\n      dev: \"pk_test_kG4TReBTkO6yDfO9mMwtShME00mx65Yyw2\",\n      prod: \"pk_live_FlJcVm7zuiGei0k6IDXksnmy003GNNZuiw\",\n    },\n  }),\n\n  async created() {\n    const isDev = process.env.NODE_ENV == \"development\";\n    const key = isDev ? this.keys.dev : this.keys.prod;\n    const stripe = window.Stripe(key);\n    this.stripe = stripe;\n    const elements = stripe.elements();\n    this.paymentIntent = await this.createIntent();\n    this.clientSecret = this.paymentIntent.client_secret;\n    this.createCardForm(elements);\n  },\n\n  methods: {\n    async createIntent() {\n      const url = \"/api/payments/stripe/intents\";\n      // stripe amounts are in cents\n      let amount = this.items.reduce((acc, item) => {\n        return acc + item.cost_usd * 100;\n      }, 0);\n      amount = Math.round(amount);\n      const params = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          amount,\n          cosmeticIDs: this.items.map((item) => item.cosmetic_id),\n          steamID: this.$store.state.auth.userSteamID,\n        }),\n      };\n      const intent = await fetch(url, params);\n\n      if (!intent.ok) {\n        const error = await intent.json();\n        this.$emit(\"error\", error.message);\n        return;\n      }\n\n      return intent.json();\n    },\n\n    createCardForm(elements) {\n      card = elements.create(\"card\");\n      card.mount(this.$refs.card);\n\n      card.on(\"change\", (e) => (this.complete = e.complete));\n    },\n\n    async submitPayment() {\n      this.awaitingPayment = true;\n      const result = await this.stripe.handleCardPayment(\n        this.clientSecret,\n        card,\n        {\n          payment_method_data: {},\n        }\n      );\n\n      if (result.error) {\n        console.error(result.error);\n        this.$emit(\"error\", result.error);\n      } else {\n        this.$emit(\"purchaseSuccess\");\n      }\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StripePurchase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StripePurchase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StripePurchase.vue?vue&type=template&id=2a49eb1a&\"\nimport script from \"./StripePurchase.vue?vue&type=script&lang=js&\"\nexport * from \"./StripePurchase.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","getDescription","staticClass","_l","line","key","_v","_s","staticRenderFns","props","cosmetic","methods","component","directives","name","rawName","value","expression","attrs","model","showGeneralError","callback","$$v","generalError","items","item","cosmetic_id","cosmeticImageSrc","cosmetic_name","$t","cost_usd","totalXp","_e","totalCost","containsPurchasedBattlePass","loggedIn","validPurchase","loading","staticStyle","on","onPurchaseSuccess","onError","paypalType","showError","error","complete","goToWechat","data","clientSecret","qrCodeUrl","paymentStatus","keys","dev","prod","created","amount","stripe","createSource","type","currency","metadata","cosmeticIDs","steamID","redirect","return_url","then","result","console","window","components","LoginButton","CosmeticDescription","PaypalPurchase","StripePurchase","StripeAlipay","StripeWeChatPay","computed","bpUpgraded","reduce","toLocaleString","fetch","method","headers","body","res","catch","showSuccess","success","processingPayment","ref","credentials","cheap","expensive","mounted","script","document","setLoaded","Math","Buttons","style","size","color","shape","label","layout","createOrder","purchase_units","currency_code","application_context","shipping_preference","onApprove","_this","orderID","err","goToAlipay","alipayRedirect","alipayStatus","paymentIntent","submitPayment","awaitingPayment","card","createCardForm","payment_method_data"],"sourceRoot":""}